<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="chrome=1"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><title>Hugo - A&rsquo;Khun</title><link rel=stylesheet href=/css/main.min.82e0d212964fcf37668e5bfc692b25a2cf8cd81a7787eee2bec090f5eb01cd65.css integrity="sha256-guDSEpZPzzdmjlv8aSslos+M2Bp3h+7ivsCQ9esBzWU=" crossorigin=anonymous media=screen><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Didact+Gothic"><meta name=twitter:card content="summary"><meta name=twitter:title content="Hugo"><meta name=twitter:description content="Support Numbered Musical Notation ¶ 為了要讓整理好的簡譜也能正常顯示，需要把簡譜用支援 CJK 的 monospaced font 顯示，例如 Sarasa Gothic。但因為把整包 CJK 字型放到網站上實在太肥，想到既然 Sarasa Gothic 整合 Iosevka 和 思源黑體，那可不可以英數字用 Iosevka、CJK 靠 Google 提供的 webfont Noto Sans Traditional Chinese 來顯示呢？於是就來實驗看看。"><meta property="og:url" content="https://akhun.co/notes/hugo/"><meta property="og:site_name" content="A'Khun"><meta property="og:title" content="Hugo"><meta property="og:description" content="Support Numbered Musical Notation ¶ 為了要讓整理好的簡譜也能正常顯示，需要把簡譜用支援 CJK 的 monospaced font 顯示，例如 Sarasa Gothic。但因為把整包 CJK 字型放到網站上實在太肥，想到既然 Sarasa Gothic 整合 Iosevka 和 思源黑體，那可不可以英數字用 Iosevka、CJK 靠 Google 提供的 webfont Noto Sans Traditional Chinese 來顯示呢？於是就來實驗看看。"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="notes"><meta property="article:modified_time" content="2022-02-15T23:55:30+08:00"><title>Hugo</title></head><body><header class="wrap flex-container"><h1>Hugo</h1></header><main class=wrap><div class=flex-container><aside role=complementary>Lastmod: Tue Feb 15, 2022</aside><hr><article role=article><h2 id=support-numbered-musical-notation class=anchor-link><a href=#support-numbered-musical-notation>Support Numbered Musical Notation<span class=pilcrow>&nbsp;¶</span></a></h2><p>為了要讓整理好的簡譜也能正常顯示，需要把簡譜用支援 CJK 的 monospaced font 顯示，例如 <a href=https://github.com/be5invis/Sarasa-Gothic>Sarasa Gothic</a>。但因為把整包 CJK 字型放到網站上實在太肥，想到既然 <a href=https://github.com/be5invis/Sarasa-Gothic>Sarasa Gothic</a> 整合 <a href=https://github.com/be5invis/Iosevka>Iosevka</a> 和 <a href=https://zh.wikipedia.org/zh-tw/%E6%80%9D%E6%BA%90%E9%BB%91%E9%AB%94>思源黑體</a>，那可不可以英數字用 <a href=https://github.com/be5invis/Iosevka>Iosevka</a>、CJK 靠 Google 提供的 webfont <a href=https://fonts.google.com/noto/specimen/Noto+Sans+TC>Noto Sans Traditional Chinese</a> 來顯示呢？於是就來實驗看看。</p><p><a href=https://github.com/be5invis/Iosevka>Iosevka</a> 可以從 <a href=https://github.com/be5invis/Iosevka/releases>releases</a> 抓 <code>ttf-iosevka-fixed-slab</code>，目前 <code>ttf-iosevka-fixed-slab-14.0.0.zip</code>，解開後拿會用到的 <code>iosevka-fixed-slab-regular.ttf</code> 就好，放到 static 裡面。<a href=https://fonts.google.com/noto/specimen/Noto+Sans+TC>Noto Sans Traditional Chinese</a> 直接到網頁底下選 regular 拿 import 路徑。最後字型相關的設定如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>@<span style=color:#66d9ef>import</span> <span style=color:#f92672>url</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#39;https://fonts.googleapis.com/css2?family=Noto+Sans+TC&amp;display=swap&#39;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>@<span style=color:#66d9ef>font-face</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>font-family</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Iosevka&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>size-adjust</span><span style=color:#f92672>:</span> <span style=color:#f92672>86</span><span style=color:#f92672>%</span> <span style=color:#75715e>/* 土炮對齊 QQ */</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>src</span><span style=color:#f92672>:</span> <span style=color:#f92672>url</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#39;/fonts/iosevka-fixed-slab-regular.ttf&#39;</span><span style=color:#f92672>)</span>
</span></span></code></pre></div><p>那個 <code>size-adjust: 86%</code> 實在非常土炮，但我一時也不知道 <a href=https://github.com/be5invis/Sarasa-Gothic>Sarasa Gothic</a> 做過什麼處理，就先這樣 QQ</p><p>設定細節可以看這個 <a href=https://github.com/badboy99tw/hugo-theme-sam/commit/bfb0c2e97346c3d9a66c5d4136332a470699ec19>commit</a>；最後 render 起來的感覺可以參考 <a href=/notes/songs/%E9%9B%A8%E5%A4%9C%E8%8A%B1/>雨夜花</a>。</p><h3 id=todo class=anchor-link><a href=#todo>TODO<span class=pilcrow>&nbsp;¶</span></a></h3><p>iOS 上試過 Safari、Firefox、Edge、Chrome 都吃不到 <code>size-adjust</code>，所以還是歪的。但正解應該是用 <a href=/notes/font/#CJK-%E7%B6%B2%E8%B7%AF%E5%AD%97%E5%9E%8B%E8%99%95%E7%90%86>WOFF</a> 處理 <a href=https://github.com/be5invis/Sarasa-Gothic>Sarasa Gothic</a>，有空來研究一下，不要再土炮啦！</p><h2 id=lastmod class=anchor-link><a href=#lastmod>.Lastmod<span class=pilcrow>&nbsp;¶</span></a></h2><p>如果想拿 git commit 的時間作為最後修改時間，可以在 <code>config.yaml</code> 裡設定 <code>enableGitInfo</code>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>enableGitInfo</span>: <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><p>接著 page template 就能拿到 <code>.GitInfo</code> 或 <code>.Lastmod</code> 這些資訊了：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{ .GitInfo | jsonify }}
</span></span><span style=display:flex><span>{{ .Lastmod.Format &#34;Mon Jan 02, 2006&#34; }}
</span></span></code></pre></div><p>但在 <a href=/notes/macos/>macOS</a> 如果遇到 <code>.GitInfo</code> 是空值，可能是因為 <a href=/notes/macos/>macOS</a> 是用 <a href=/notes/unicode/#NFD>NFD</a> 格式儲存 unicode 檔名的關係，把 git 的 <a href=/notes/git/#core.quotePath>quotePath</a> 關掉可以解決這個問題：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git config --global core.quotePath false
</span></span></code></pre></div><p>若還想在 <a href=/notes/markdown/>Markdown</a> 的 Front Matter 手動指定 <code>lastmod</code>，則需要 <a href=https://gohugo.io/getting-started/configuration/#configure-dates>從 config 設定 lastmod 的順位</a>，例如：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>// config.yaml</span>
</span></span><span style=display:flex><span><span style=color:#f92672>frontmatter</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>lastmod</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>lastmod</span>
</span></span><span style=display:flex><span>    - :<span style=color:#ae81ff>git</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>date</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>publishDate</span>
</span></span></code></pre></div><h2 id=references class=anchor-link><a href=#references>References<span class=pilcrow>&nbsp;¶</span></a></h2><ul><li><a href=https://gohugo.io/variables/git/>Git Info Variables</a></li><li><a href=https://github.com/gohugoio/hugo/issues/3071>Gitinfo fails on unicode filename</a></li><li><a href=https://mertbakir.gitlab.io/hugo/last-modified-date-in-hugo/>Last Modified Date in Hugo</a></li></ul></article></div><nav role=navigation class="flex-container bottom-menu"><hr><p><a href=/notes>notes</a>
&#183;
<a href=/posts>posts</a>
&#183;
<a href=/about>about</a>
&#183;
<a href=/>home</a></p></nav></main><footer class="flex-container footer">盒仔內 ê 時間</footer></body></html>